<div style='height: 200px;'></div>

<!-- Debug Info -->
<div style='display: none;'>
  Debug Info: errorMessage: "{{errorMessage}}" errorFilePath: "{{errorFilePath}}"
</div>

{{#if errorMessage}}
  <div class='col-12 w-100 d-flex justify-content-center mt-1 mb-1'>
    <p class='alert alert-danger w-50 text-center align-self-center'>{{errorMessage}}</p>
  </div>
{{/if}}

{{#if errorFilePath}}
  <div class='col-12 w-100 d-flex justify-content-center mt-1 mb-1 flex-column'>
    <p class='alert alert-danger w-50 text-center align-self-center'>{{errorMessage}}
      <a style='font-size: 17px;font-style: italic;color:#01019e' href='/importFiles/downloadErrorFile?filePath={{errorFilePath}}'>این فایل </a>
      را مشاهده نمایید.</p>
  </div>
{{/if}}

<div class='import-file-container'>
  <form id='frmImportCodingData' data-frmValidation novalidate enctype='multipart/form-data'>
    <h3>لطفا فایل مورد نظر را بارگذاری کنید.</h3>

    <div class='mb-3'>
      <label for='tableSelect' class='form-label' style='font-size: 18px;font-style: italic;color:#01019e;margin:15px;0;'>انتخاب جدول دیتابیس:</label>
      <select class='form-select' id='tableSelect' name='tableName' required>
        <option value=''>-- لطفا یک جدول انتخاب کنید --</option>
        {{#each tables}}
          <option value='{{this.name}}'>{{this.name}}</option>
        {{/each}}
      </select>
    </div>

    <div class='mb-3'>
      <input type='file' name='excelFile' class='form-control' id='excelFile' accept='.xlsx, .xls' required />
    </div>
    <div class='text-center'>
      <button class='btn btn-success' type='submit' style='width:120px;text-align: center;'>تایید</button>
    </div>
  </form>
</div>

<!-- نوار پیشرفت -->
<div class='progress mb-3' style='display: none;'>
  <div id='progress-bar' class='progress-bar progress-bar-striped progress-bar-animated' role='progressbar' style='width: 0%' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100'>0%</div>
</div>
<div id='progress-text' class='text-center mb-3' style='display: none;'>
  منتظر شروع پردازش...
</div>

<!-- Load CSS first -->
<link href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css' rel='stylesheet' />
<!-- Load JavaScript libraries -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js'></script>
<script src='/static/assets/js/formValidation.js'></script>
<script src='/static/assets/js/importData_Progressbar.js'></script>